# GTokenVerifier

**GTokenVerifier** is a lightweight utility for decoding and verifying Google ID tokens generated by Firebase Authentication.

## Overview

This library simplifies the process of verifying the authenticity of Google ID tokens by leveraging Google's OAuth2 certificates. It allows you to validate tokens and optionally extract specific attributes from the decoded payload. 

## How It Works

### Public Key Setup

The package uses public keys derived from the OAuth2 certificates published by Google at:  
[Google OAuth2 Certificates](https://www.googleapis.com/oauth2/v3/certs)

You can provide the certificates manually or let the package handle the download and caching for you. Additionally, the verifier requires the audience (client ID) from your credentials for proper validation.

### Configuration

`GTokenVerifier` includes a builder pattern to streamline configuration. You can specify the audience and provide the certificates in one of the following ways:

- As a JSON string
- From a JSON file
- By letting the library automatically fetch and cache the certificates

## Usage

The library provides several overloaded methods for decoding and verifying ID tokens:

```java
Map<String, String> decode(String idToken);
Map<String, String> decode(String idToken, String... attributes);
Map<String, String> decode(String idToken, Exception customException, String... attributes);
```
### Method Details

#### `decode(String idToken)`

This method validates the token's legitimacy. It is ideal when you only need to verify the token without extracting specific attributes.

#### `decode(String idToken, String... attributes)`

In addition to validating the token, this method allows you to retrieve specific attributes from the decoded payload (e.g., `sub`, `iss`, `email`, etc.). The attributes are returned in a `Map`.

#### `decode(String idToken, Exception customException, String... attributes)`

Similar to the previous method, this validates the token and retrieves specified attributes. However, it also supports custom exception handling, which is triggered if any requested attribute is missing from the decoded token.
